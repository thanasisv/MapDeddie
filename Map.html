<input id="search-box" type="text" placeholder="Αναζήτηση"> 
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAIpW0xPz54Mq3F8cpmSox7QbTD6vGRj90=initMap&libraries=places" async defer></script>
<iframe src="https://www.google.com/maps/d/embed?mid=1_83AvSFX_RW_EZLRoSyLJmX9PvO-r8I&ehbc=2E312F&kml=https://drive.google.com/file/d/1FlkQiVsFSP6bCRWxqJ578eDymuSRKR7p/view?usp=drivesdk" width="720" height="1800"></iframe>

<script>
  function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 0, lng: 0},
      zoom: 4
    });

    var input = document.getElementById('search-box');
    var searchBox = new google.maps.places.SearchBox(input);

    map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

    var kmlLayer = new google.maps.KmlLayer({
      url: 'https://thanasisv.github.io/kml/KML FOR NAVIGATOR.kml',
      map: map,
      suppressInfoWindows: false
    });

    map.addListener('bounds_changed', function() {
      searchBox.setBounds(map.getBounds());
    });

    var markers = [];

    searchBox.addListener('places_changed', function() {
      var places = searchBox.getPlaces();

      if (places.length == 0) {
        return;
      }

      markers.forEach(function(marker) {
        marker.setMap(null);
      });
      markers = [];

      var bounds = new google.maps.LatLngBounds();
      places.forEach(function(place) {
        if (!place.geometry) {
          console.error("Δεν βρέθηκαν γεωμετρικές πληροφορίες για το μέρος:", place);
          return;
        }

        markers.push(new google.maps.Marker({
          map: map,
          title: place.name,
          position: place.geometry.location
        }));

        if (place.geometry.viewport) {
          bounds.union(place.geometry.viewport);
        } else {
          bounds.extend(place.geometry.location);
        }
      });

      map.fitBounds(bounds);

      // Εκτύπωση των αποτελεσμάτων στην κονσόλα
      console.log("Αποτελέσματα αναζήτησης:", places);
    });
  }
</script>
