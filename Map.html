<!-- Συμπερίληψη των JavaScript αρχείων του Google Maps API -->
<script src="https://maps.googleapis.com/maps/api/js?key= AIzaSyAIpW0xPz54Mq3F8cpmSox7QbTD6vGRj90&callback=initMap" async defer></script>
</head>

<body>
    <!-- Περιοχή όπου θα εμφανιστεί ο χάρτης -->
    <div id="map" style="height: 400px;"></div>

    <!-- Κουτί αναζήτησης αρχείου KML -->
    <input type="file" accept=".kml" onchange="handleFile(this.files)" />

    <!-- Πεδίο κειμένου αναζήτησης -->
    <input type="text" placeholder="Αναζήτηση..." oninput="searchKmlLayer(this.value)" />

    <!-- Συμπερίληψη του JavaScript κώδικα -->
    <script>
        var map;
        var kmlLayer;

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: -34.397, lng: 150.644 },
                zoom: 8
            });

            // Φορτώστε εδώ το KML από ένα URL ή αφήστε τον χρήστη να το επιλέξει με το κουτί αναζήτησης αρχείου
        }

        function handleFile(files) {
            var file = files[0];
            if (file) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    var kmlData = e.target.result;
                    loadKmlData(kmlData);
                };
                reader.readAsText(file);
            }
        }

        function loadKmlData(kmlData) {
            kmlLayer = new google.maps.KmlLayer({
                map: map,
                suppressInfoWindows: true,
                preserveViewport: false,
                kmzData: kmlData
            });
        }

        function searchKmlLayer(keyword) {
            if (!kmlLayer) return;

            kmlLayer.setMap(null); // Καθαρισμός του προηγούμενου KML Layer

            kmlLayer = new google.maps.KmlLayer({
                map: map,
                suppressInfoWindows: true,
                preserveViewport: false,
                url: 'https://thanasisv.github.io/kml/KML%20FOR%20NAVIGATOR.kml?search=' + encodeURIComponent(keyword)
            });
        }
    </script>
</body>

</html>
